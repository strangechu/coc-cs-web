<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>COC角色卡建立</title>
    <script>
    function randomCharacter() {
        document.getElementsByName('name')[0].value = '角色' + Math.floor(Math.random() * 10000);
        document.getElementsByName('occupation')[0].value = '職業' + Math.floor(Math.random() * 100);
        document.getElementsByName('app')[0].value = '外貌' + Math.floor(Math.random() * 100);
        document.getElementsByName('str')[0].value = Math.floor(Math.random() * 100);
        document.getElementsByName('dex')[0].value = Math.floor(Math.random() * 100);
        document.getElementsByName('san')[0].value = Math.floor(Math.random() * 100);
    }
    function getPrefix() {
        // 根據平台自動判斷前綴
        return (window.location.pathname.startsWith('/coc-web')) ? '/coc-web' : '';
    }
    </script>
</head>
<body>
    <h1>建立角色卡</h1>
    <form method="POST" id="createForm" enctype="multipart/form-data">
        <label>名稱: <input type="text" name="name" required></label><br>
        <label>職業: <input type="text" name="occupation" required></label><br>
        <label>外貌: <input type="text" name="app" required></label><br>
        <label>力量: <input type="number" name="str" required></label><br>
        <label>敏捷: <input type="number" name="dex" required></label><br>
        <label>理智: <input type="number" name="san" required></label><br>
        <label>圖片: <input type="file" name="image" accept="image/*"></label><br>
        <button type="submit">儲存</button>
        <button type="button" onclick="randomCharacter()" style="margin-left:10px;background-color:#3498db;color:white;">快速隨機創建</button>
    </form>
    <form method="POST" id="clearForm" style="margin-top:20px;">
        <button type="submit" style="background-color:#e74c3c;color:white;">清除所有角色資料</button>
    </form>
    <a id="viewAll" href="#">查看所有角色</a>
    <script>
    document.getElementById('createForm').action = getPrefix() + '/create';
    document.getElementById('clearForm').action = getPrefix() + '/clear';
    document.getElementById('viewAll').href = getPrefix() + '/characters';
    </script>
</body>
</html>
